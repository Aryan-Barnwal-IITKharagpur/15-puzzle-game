<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<title>PUZZLE</title>
<style>

#icons
{
    display: flex;
    align-items: center;
    color: black; 
}
#icons a
{
    height: 40px;
    width: 40px;
    font-size: 23px;
    text-decoration: none;
    display: grid;
    color:#fdf7fc;
    place-items: center;
    margin: 30px 0
}
#icons a:hover
{
    color: #1b66bb;
}
#puzzle{
    width:401px;
    height: 401px; 
    margin:auto;
    border:2px solid goldenrod;
}

.tile{
    background-image:url('My project.jpg');
    width: 100px;
    height:100px;
    float:left;
    border:1.5px solid darkgoldenrod;
    box-sizing:border-box;
}

#tile1 { background-position:0px 0px }
#tile2 { background-position:-100px -0px }
#tile3 { background-position:-200px -0px }
#tile4 { background-position:-300px -0px }
#tile5 { background-position:-0px -100px }
#tile6 { background-position:-100px -100px }
#tile7 { background-position:-200px -100px }
#tile8 { background-position:-300px -100px }
#tile9 { background-position:-0px -200px }
#tile10 { background-position:-100px -200px }
#tile11 { background-position:-200px -200px }
#tile12 { background-position:-300px -200px }         
#tile13 { background-position:-0px -300px }  
#tile14 { background-position:-100px -300px } 
#tile15 { background-position:-200px -300px } 
#tile0 { background-position:-300px -300px }
</style>

<link rel="stylesheet" href="jquery-ui.css">
</head>


<body bgcolor="purple">


<div id="top" style="width:1200px; margin:auto; margin-top:10px; text-align:center">
<header style="width:1190; height:100px;;border-left:10px solid black; ">
<h1 style="font-size:70px; margin:auto; text-align:center; color:black; text-shadow:2px 2px cyan;text-decoration:underline">15-PUZZLE-GAME</h1>
</header>

<div id="puzzle">
    <div id='tile1' class='tile'></div>
    <div id='tile2' class='tile'></div>
    <div id='tile3' class='tile'></div>
    <div id='tile4' class='tile'></div>
    <div id='tile5' class='tile'></div>
    <div id='tile6' class='tile'></div>
    <div id='tile7' class='tile'></div>
    <div id='tile8' class='tile'></div>
    <div id='tile9' class='tile'></div>
    <div id='tile10' class='tile'></div>
    <div id='tile11' class='tile'></div>
    <div id='tile12' class='tile'></div>
    <div id='tile13' class='tile'></div>
    <div id='tile14' class='tile'></div>
    <div id='tile15' class='tile'></div>
    <div id='tile16' class='tile'></div>   
</div>

        </div>
        <div id= "gameStart">
            <br/>
        <button id= "gameStart" style='display:inline; margin-left: 600px;' onclick="shuffle()">Start</button><br/><br/>
          </div>
          <div id= "countdown" style='margin-left: 560px; color: #fdf7fc;'></div>
        

<div style="margin-top:10px; height:1000px;">
<div>
<div style="width:50%; float:left; display:inline">
<div style="text-align:center; height:30px">
<h1 id="message"></h1>
</div>
<div style="text-align:center; height:30px">
<h1 id="moves"></h1>
</div>

<div>
<canvas id="canvas" height="400px" width="400px"></canvas>
</div>
</div>
<div style=" padding-top:2px; text-align:center; width:50%">
<h1 style="font-size:40px; color:magenta; text-decoration:underline">ORIGINAL IMAGE</h1>
<div style="margin:auto">
    <img src="image_part_001.jpg" id="puzz1" width="100" height="100">
    <img src="image_part_002.jpg" id="puzz1" width="100" height="100">
    <img src="image_part_003.jpg" id="puzz1" width="100" height="100">
    <img src="image_part_004.jpg" id="puzz1" width="100" height="100">
</div>
<div>
    <img src="image_part_005.jpg" id="puzz1" width="100" height="100">
    <img src="image_part_006.jpg" id="puzz1" width="100" height="100">
    <img src="image_part_007.jpg" id="puzz1" width="100" height="100">
    <img src="image_part_008.jpg" id="puzz1" width="100" height="100">
</div>
<div>
    <img src="image_part_009.jpg" id="puzz1" width="100" height="100">
    <img src="image_part_010.jpg" id="puzz1" width="100" height="100">
    <img src="image_part_011.jpg" id="puzz1" width="100" height="100">
    <img src="image_part_012.jpg" id="puzz1" width="100" height="100">
</div>
    <img src="image_part_013.jpg" id="puzz1" width="100" height="100">
    <img src="image_part_014.jpg" id="puzz1" width="100" height="100">
    <img src="image_part_015.jpg" id="puzz1" width="100" height="100">
    <img src="image_part_016.jpg" id="puzz1" width="100" height="100">
</div>
</div>
</div>

<footer id="icons">  
    <a href="https://www.facebook.com/aryan.barnwal.520/" target="_blank" title="facebook page link"><i class="fab fa-facebook-f"></i></a>
    <a href="https://www.instagram.com/aryanbarnwal394/?hl=en" target="_blank" title="instagram page link"><i class="fab fa-instagram"></i></a>
    <a href="https://www.linkedin.com/in/aryan-barnwal-915a321b9/" target="_blank" title="youtube page link"><i class="fab fa-linkedin"></i></a>
</footer>

    <script src="jquery-min.js"></script>
    <script src="jquery-ui.js"></script>

<script>

document.getElementById("gameStart").addEventListener("click", function(){
            var timeleft = 600;
        
            var downloadTimer = setInterval(function function1(){
            document.getElementById("countdown").innerHTML = timeleft + 
            "&nbsp"+"seconds remaining";
        
            timeleft -= 1;
            if(timeleft <= 0){
                clearInterval(downloadTimer);
                document.getElementById("countdown").innerHTML = "Time is up!"
            }
            }, 1000);
        
            console.log(countdown);
        });

var empty=16;
var moves=-1;
function shuffle() {
            ar.sort(function(a, b){return 0.5 - Math.random()});
            
            $('#puzzle').html('');
            for (var i = 0; i < ar.length; i++) {
                $( "#puzzle" ).append("<div id='tile"+ar[i]+"' class='tile'></div>");
            }
            return ar;
	}
var ar=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0];
im=shuffle([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0]);

for(var i=0;i<=15;i++){
	if(im[i]==0)
		empty=i+1;
}

var restart=0;
function won(){
	ctx.clearRect(300,300,100,100);
	var img=document.getElementById("");
	var pat=ctx.createPattern(img,"repeat");
	ctx.fillStyle=pat;
	ctx.fillRect(300,300,100,100);
	m=document.getElementById("message");
	m.innerHTML="You won the game in "+moves.toString() +" moves";
	au=document.getElementById("cheers");
	au.play();
	restart=1;
	moves=-1;
}

function draw(){
	moves++;
	mov=document.getElementById("moves");
	mov.innerHTML="MOVES: "+ moves.toString();
	m=document.getElementById("message");
	m.innerHTML="";
  var t;
  t=0;
  if(restart==1){
	
	  im=shuffle([1,2,3,4,5,6,7,8,10,11,12,13,14,15,0]);
		for(var i=0;i<=15;i++){
			if(im[i]==0)
				empty=i+1;
			
				
		}
		
		console.log(empty);
		
	 ctx.clearRect(0,0,300,300);
	  restart=0;
  }
	for(var i=0;i<16;i++){
		if(im[i]!=ar[i])
			t=1;	
	}
	console.log(im);
	console.log(ar);
	
	for(var i=0;i<4;i++){
    	for(var j=0;j<4;j++){
    		   component(i,j);    		
    	}
    }
	
	console.log(t);
	
	if(t==0){
		console.log("one more");
		won();
	}
	
}

function component(x, y) {
    
    var text="puzz";
    z=x+3*y;
    z=im[z];
    text=text+z.toString();
    if(z!=0)
    {
    	var img=document.getElementById(text);
    	var pat=ctx.createPattern(img,"repeat");
    	ctx.fillStyle=pat;
    }
    
    else
    {
    	ctx.fillStyle="white";
    }
    
    ctx.fillRect(100*x,100*y,100,100);    
}

function moveup() {
	ctx.clearRect(0,0,300,300);
	if(restart==1)
		{
		draw();
		return;
		}
    if(empty==9||empty==7||empty==8){
    	au=document.getElementById("no");
    	au.play();
    	moves--;
    	draw();
    } 
    else{
    	au=document.getElementById("cut");
    	au.play();
    	text="puzz";
    	var curr=empty;
    	empty=empty+3;
    	var next=empty;
        im[curr-1]=im[next-1];
        im[next-1]=0;
        draw();
    	
    }
    console.log(empty);
}

function movedown() {
	ctx.clearRect(0,0,300,300);
	if(restart==1)
	{
	
	draw();
	return;
	}
	if(empty==1||empty==2||empty==3) {
		au=document.getElementById("no");
    	au.play();
		moves--;
		draw();
    }
    else{
    	au=document.getElementById("cut");
    	au.play();
    	text="puzz";
    	var curr=empty;
    	empty=empty-3;
    	var next=empty;
        im[curr-1]=im[next-1];
        im[next-1]=0;
        draw();
        
    }
    
    console.log(empty);
    
}

function moveleft() {
	ctx.clearRect(0,0,300,300);
	
	if(restart==1)
	{
	
	draw();
	return;
	}
	
	if(empty==6||empty==9||empty==3) {
		au=document.getElementById("no");
    	au.play();
		moves--;  
		draw();
	    }
	    else{
	    	au=document.getElementById("cut");
	    	au.play();
	    	text="puzz";
	    	var curr=empty;
	    	empty=empty+1;
	    	var next=empty;
	        im[curr-1]=im[next-1];
	        im[next-1]=0;
	        draw();
	    	
	  
	    }
	  console.log(empty);
}

function moveright() {
	ctx.clearRect(0,0,300,300);
	if(restart==1)
	{
	moves--;
	draw();
	return;
	}
	  if(empty==1||empty==4||empty==7) {
		  au=document.getElementById("no");
	    	au.play();
		  moves--;
		  draw();
	    }
	    else{
	    	au=document.getElementById("cut");
	    	au.play();
	    	text="puzz";
	    	var curr=empty;
	    	empty=empty-1;
	    	var next=empty;
	        im[curr-1]=im[next-1];
	        im[next-1]=0;
	        draw();
	    }console.log(empty);
	
	  }
	  
window.addEventListener('keydown', function (e) {
    key = e.keyCode;
    if(key==37){
    	e.preventDefault();
    	moveleft();
    }
    if(key==38){
    	e.preventDefault();
    	moveup();
    }
    if(key==39){
    	e.preventDefault();
    	moveright();
    }
    if(key==40){
    	e.preventDefault();
    	movedown();
    }
	if(key==83){
		e.preventDefault();
		start();
	}
    
});
function start(){
draw();
}
ctx.font = "30px Arial";


</script>
</body>
</html>